(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=a(5),d=a(19),l=a(15),s=a(2),u={loading:!0,boards:[],currBoard:{}},p={listLoading:!0,lists:[]},m={cardLoading:!0,cards:[]},g={activities:[]},b={images:[]},f=a(59),h=Object(d.c)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"makeRequestBoard":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"getBoards":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,boards:t.payload.boards});case"getBoardById":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,currBoard:t.payload.currBoard});case"errorBoard":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.payload.error,boards:[]});case"addBoard":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,boards:[].concat(Object(l.a)(e.boards),[t.payload.board]),newBoard:t.payload.board});case"updateBoard":var a=Object(l.a)(e.boards),n=a.findIndex((function(e){return e._id===t.payload.board._id}));return a[n]=t.payload.board,Object(s.a)(Object(s.a)({},e),{},{boards:a,currBoard:t.payload.board,loading:!1});case"deleteBoard":var r=Object(l.a)(e.boards),c=r.findIndex((function(e){return e._id===t.payload.board._id}));return r.splice(c,1),Object(s.a)(Object(s.a)({},e),{},{boards:r,loading:!1});default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"makeRequestList":return Object(s.a)(Object(s.a)({},e),{},{listLoading:!0});case"getLists":return Object(s.a)(Object(s.a)({},e),{},{listLoading:!1,lists:t.payload.lists});case"addList":return Object(s.a)(Object(s.a)({},e),{},{lists:[].concat(Object(l.a)(e.lists),[t.payload.list])});case"updateList":var a=Object(l.a)(e.lists),n=a.findIndex((function(e){return e._id===t.payload.list._id}));return a[n]=t.payload.list,Object(s.a)(Object(s.a)({},e),{},{lists:a,listLoading:!1});case"deleteList":var r=Object(l.a)(e.lists),c=r.findIndex((function(e){return e._id===t.payload.list._id}));return r.splice(c,1),Object(s.a)(Object(s.a)({},e),{},{lists:r,listLoading:!1});case"errorList":return Object(s.a)(Object(s.a)({},e),{},{listLoading:!1,listError:t.payload.error});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"makeRequestCard":return Object(s.a)(Object(s.a)({},e),{},{cardLoading:!0});case"getCards":return Object(s.a)(Object(s.a)({},e),{},{cardLoading:!1,cards:t.payload.cards});case"addCard":return Object(s.a)(Object(s.a)({},e),{},{cards:[].concat(Object(l.a)(e.cards),[t.payload.card])});case"updateCard":var a=Object(l.a)(e.cards),n=a.findIndex((function(e){return e._id===t.payload.card._id}));return a[n]=t.payload.card,Object(s.a)(Object(s.a)({},e),{},{cards:a,cardLoading:!1});case"deleteCard":var r=Object(l.a)(e.cards),c=r.findIndex((function(e){return e._id===t.payload.card._id}));return r.splice(c,1),Object(s.a)(Object(s.a)({},e),{},{cards:r,cardLoading:!1});case"errorCard":return Object(s.a)(Object(s.a)({},e),{},{cardLoading:!1,cardError:t.payload.error});default:return e}},activities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getActivities":return Object(s.a)(Object(s.a)({},e),{},{activities:t.payload.activities});case"addActivity":return Object(s.a)(Object(s.a)({},e),{},{activities:[].concat(Object(l.a)(e.activities),[t.payload.activity])});case"deleteActivity":var a=e.activities,n=a.findIndex((function(e){return e._id===t.payload.activity._id}));return a.splice(n,1),Object(s.a)(Object(s.a)({},e),{},{activities:Object(l.a)(e.activitiesLog)});case"errorActivity":return Object(s.a)(Object(s.a)({},e),{},{activityError:t.payload.error});default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getUrls":var a=t.payload.images.map((function(e){return{id:e.id,thumb:e.urls.thumb,full:e.urls.full,user:{username:e.user.username,link:e.user.links.html}}}));return{images:a};default:return e}}}),v=Object(d.e)(h,Object(d.d)(Object(d.a)(f.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),y=a(44),O=a(7),j=a(4),x=a(6),E=a.n(x),k="".concat("http://localhost:1337","/api/boards/"),w=function(e,t){return function(a){a({type:"makeRequestBoard"}),E.a.patch(k+e,t).then((function(e){a({type:"updateBoard",payload:{board:e.data}})})).catch((function(e){a({type:"errorBoard",payload:{error:e.message}})}))}},C="".concat("http://localhost:1337","/api/activities/"),I=function(e){return function(t){E.a.post(C,e).then((function(e){t({type:"addActivity",payload:{activity:e.data}})})).catch((function(e){"Network Error"===e.message?t({type:"errorActivity",payload:{error:e}}):422===e.response.status&&t({type:"validationErrorActivity"})}))}},B=a(116),L=a(118),N=a(121),_=a(119),S=a(120),R=a(40),T=a.n(R),A=Object(B.a)((function(e){return{card:{margin:e.spacing(.2,1,.09,1),wordWrap:"break-word",padding:function(t){return"list"===t.type?e.spacing(.5,1.5,.5,1.5):e.spacing(1,1,3.5,2)},boxShadow:function(e){return"list"===e.type?"inset 0 0 0 2px #0079bf":"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)"}},btn:{marginLeft:e.spacing(1),backgroundColor:"#5aac44",color:"white",textTransform:"none","&:hover":{opacity:1.6,backgroundColor:"#61BD4F"}},icon:{opacity:.6,color:"black","&:hover":{opacity:1}},listBackground:{backgroundColor:"#EBECF0",marginLeft:function(t){return t.marginLeft?e.spacing(1):e.spacing(0)},paddingTop:function(t){return"list"===t.type?e.spacing(1):"inherit"},borderRadius:e.spacing(.5)},width:function(e){return{width:e.width}}}}));function F(e){var t=e.value,a=e.changedHandler,n=e.itemAdded,c=e.closeHandler,o=e.width,i=e.type,d=e.btnText,l=e.placeholder,s=e.marginLeft,u=A({type:i,width:o,marginLeft:s});return r.a.createElement("div",{className:u.listBackground},r.a.createElement(L.a,{className:"".concat(u.card," ").concat(u.width)},r.a.createElement(N.a,{onChange:a,multiline:!0,fullWidth:!0,value:t,autoFocus:!0,placeholder:l,onBlur:function(){n(),c()}})),r.a.createElement(_.a,{className:u.btn,variant:"contained",onClick:n},d),r.a.createElement(S.a,{className:u.icon,onClick:c},r.a.createElement(T.a,null)))}var z=Object(B.a)((function(e){return{header:{padding:e.spacing(.3,.3,.3,.3),marginBottom:e.spacing(1),backgroundColor:"hsla(0,0%,100%,.24)",color:"black",fontWeight:"bold",fontSize:"23px",textAlign:"center",fontFamily:"Pacifico",position:"fixed",width:"100%",zIndex:1},trellis:{zIndex:100,opacity:.7,color:"black",display:"inline-block","&:hover":{opacity:1,cursor:"pointer"}}}}));function W(){var e=z();return r.a.createElement("div",{className:e.header},r.a.createElement("div",{className:e.trellis},"Trellis"))}var H="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjE1NzgwNn0",D="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE1NzgwNn0",q=Object(B.a)((function(e){return{card:{height:"90px",width:"12.8%",margin:e.spacing(1),borderRadius:e.spacing(.7),"&:hover":{opacity:.7,cursor:"pointer"},position:"relative"},menuContainer:{display:"flex",flexWrap:"wrap",marginLeft:e.spacing(30)},title:{position:"absolute",top:e.spacing(0),left:e.spacing(0),width:"100%",wordWrap:"break-word",overflow:"hidden",lineHeight:"1.5em",height:"3em",color:"white",fontWeight:"bold",padding:e.spacing(.7)}}}));function U(){var e=q(),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],o=a[1],d=Object(i.d)((function(e){return e.boards})),l=d.boards,s=d.newBoard,u=Object(n.useState)(!1),p=Object(j.a)(u,2),m=p[0],g=p[1],b=Object(i.c)();Object(n.useEffect)((function(){b((function(e){e({type:"makeRequestBoard"}),E.a.get(k).then((function(t){e({type:"getBoards",payload:{boards:t.data}})})).catch((function(t){e({type:"errorBoard",payload:{error:t}})}))}))}),[b]);Object(n.useEffect)((function(){s&&b(I({text:"User created this board",boardId:s._id}))}),[s,b]);return r.a.createElement("div",{style:{backgroundColor:"#FAFBFC"}},r.a.createElement(W,null),r.a.createElement("div",{style:{paddingTop:"80px"}},r.a.createElement("div",{className:e.menuContainer},l.map((function(t){return r.a.createElement("div",{className:e.card,key:t._id,style:{backgroundColor:"".concat(t.image.color),backgroundImage:"url(".concat(t.image.thumb,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(e){e.preventDefault(),window.location.href="/b/".concat(t._id,"/").concat(t.name)}},r.a.createElement("div",{className:e.title},t.name))})),!m&&r.a.createElement("div",{className:e.card,style:{backgroundColor:"#E7E9ED"},onClick:function(){return g(!0)}},r.a.createElement("div",{style:{fontSize:"14px",opacity:.8,textAlign:"center",marginTop:"35px"}},"Create new board")),m&&r.a.createElement("div",{className:e.card,style:{opacity:"1"}},r.a.createElement(F,{value:c,changedHandler:function(e){e.preventDefault(),o(e.target.value)},itemAdded:function(){var e;""!==c&&(b((e={name:c,image:{color:"white",thumb:H,full:D}},function(t){t({type:"postRequestBoard"}),E.a.post(k,e).then((function(e){t({type:"addBoard",payload:{board:e.data}})})).catch((function(e){"Network Error"===e.message?t({type:"errorBoard",payload:{error:e}}):422===e.response.status&&t({type:"validationErrorBoard"})}))})),o(""),g(!1))},closeHandler:function(){g(!1),o("")},placeholder:"Add board title",btnText:"Create",type:"list",width:"120px"})))))}function P(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null))}var M=a(31),J=a(27),X="".concat("http://localhost:1337","/api/cards"),Z=function(e,t){return function(a){E.a.patch(X+e,t).then((function(e){a({type:"updateCard",payload:{card:e.data}})})).catch((function(e){a({type:"errorCard",payload:{error:e.message}})}))}},Q=a(63),V=a.n(Q),Y=Object(B.a)((function(e){return{card:{padding:e.spacing(1,1,1,2),margin:e.spacing(1),width:"230px",wordWrap:"break-word","&:hover":{backgroundColor:"#EBECF0"}}}}));function G(e){var t=e.task,a=e.index,c=Y(),o=Object(n.useState)(!1),d=Object(j.a)(o,2),l=d[0],s=d[1],u=Object(n.useState)(t.name),p=Object(j.a)(u,2),m=p[0],g=p[1],b=Object(i.c)();return r.a.createElement(J.b,{draggableId:t._id,index:a},(function(e){return r.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),r.a.createElement(L.a,{className:c.card,onClick:function(){s(!0)}},l?r.a.createElement(N.a,{onChange:function(e){e.preventDefault(),g(e.target.value)},multiline:!0,fullWidth:!0,value:m,style:{minHeight:"7px"},autoFocus:!0,onFocus:function(e){var t=e.target.value;e.target.value="",e.target.value=t},onBlur:function(){s(!1),b(Z(t._id,{name:m}))}}):r.a.createElement("div",{style:{display:"flex",position:"relative"}},r.a.createElement("div",null,t.name),r.a.createElement(S.a,{style:{right:0,position:"absolute",marginTop:"-10px",zIndex:"100"},onClick:function(){var e;b((e=t._id,function(t){E.a.delete(X+e).then((function(e){t({type:"deleteCard",payload:{card:e.data}})})).catch((function(e){t({type:"errorCard",payload:{error:e.message}})}))}));var a="User deleted card ".concat(t.name);b(I({text:a,boardId:t.boardId}))}},r.a.createElement(V.a,{fontSize:"small"})))))}))}function K(e,t){var a,n,r,c;for(r=0;a===n;r++)a=r<e.length?e.charCodeAt(r):96,n=r<t.length?t.charCodeAt(r):123;if(c=e.slice(0,r-1),96===a){for(;97===n;)n=r<t.length?t.charCodeAt(r++):123,c+="a";98===n&&(c+="a",n=123)}else if(a+1===n)for(c+=String.fromCharCode(a),n=123;122===(a=r<e.length?e.charCodeAt(r++):96);)c+="z";return c+String.fromCharCode(Math.ceil((a+n)/2))}var $=Object(B.a)((function(e){return{add:{textTransform:"none",margin:e.spacing(.2,1,1,1),justifyContent:"left",opacity:.8,fontWeight:function(e){return"background"===e.type?"bold":"inherit"},backgroundColor:function(e){return"card"!==e.type?"hsla(0,0%,100%,.24)":"inherit"},"&:hover":{opacity:1,backgroundColor:"rgba(9,30,66,.08)"}},width:function(e){return{width:e.width,color:e.color}}}}));function ee(e){var t=e.btnText,a=e.handleClick,n=e.type,c=e.icon,o=e.width,i=e.color,d=$({type:n,width:o,color:i});return r.a.createElement(_.a,{className:"".concat(d.add," ").concat(d.width),onClick:a},c," ",t)}var te=a(41),ae=a.n(te),ne="".concat("http://localhost:1337","/api/lists/"),re=function(e,t){return function(a){E.a.patch(ne+e,t).then((function(e){a({type:"updateList",payload:{list:e.data}})})).catch((function(e){a({type:"errorList",payload:{error:e}})}))}},ce=a(64),oe=a.n(ce),ie=Object(B.a)((function(e){return{root:{width:"272px",backgroundColor:"#EBECF0",marginLeft:e.spacing(1),wordWrap:"break-word"},scroll:{maxHeight:"500px",overflow:"auto",overflowX:"hidden"},title:{padding:e.spacing(1,1,1,1),minWidth:"100px",marginLeft:e.spacing(1.5),fontWeight:"bold"},wrapper:{marginTop:e.spacing(11.5)},editable:{marginLeft:e.spacing(-1),wordWrap:"break-word",padding:e.spacing(0,1,0,1),boxShadow:"inset 0 0 0 2px #0079bf",width:"210px",borderRadius:4}}}));function de(e){var t=e.column,a=e.tasks,c=e.index,o=ie(),d=Object(n.useState)(""),l=Object(j.a)(d,2),s=l[0],u=l[1],p=Object(n.useState)(t.name),m=Object(j.a)(p,2),g=m[0],b=m[1],f=Object(n.useState)(!1),h=Object(j.a)(f,2),v=h[0],y=h[1],O=Object(n.useState)(!1),x=Object(j.a)(O,2),k=x[0],w=x[1],C=Object(n.useRef)(!0),B=Object(i.c)(),_=function(e){e.preventDefault(),u(e.target.value)},R=function(){if(""!==s){var e,n=a.length,r={name:s,boardId:t.boardId,listId:t._id,order:0===n?"n":K(a[n-1].order,"")};B((e=r,function(t){t({type:"postRequestCard"}),E.a.post(X,e).then((function(e){t({type:"addCard",payload:{card:e.data}})})).catch((function(e){"Network Error"===e.message?t({type:"errorCard",payload:{error:e.message}}):422===e.response.status&&t({type:"validationErrorCard"})}))})),B(I({text:"User added ".concat(s," to ").concat(t.name),boardId:t.boardId})),u(""),y(!0)}},T=function(){y(!0),C.current=!1},A=function(){y(!1),C.current=!0,u("")},z=function(e){e.preventDefault(),b(e.target.value)},W=function(){B(re(t._id,{name:g})),w(!1)};return r.a.createElement("div",{className:o.wrapper},r.a.createElement(J.b,{draggableId:t._id,index:c},(function(e){return r.a.createElement("div",Object.assign({},e.draggableProps,{ref:e.innerRef}),r.a.createElement(L.a,Object.assign({elevation:0,className:o.root},e.dragHandleProps),r.a.createElement("div",{className:o.title,onClick:function(){return w(!0)}},!k&&r.a.createElement("div",{style:{display:"flex",position:"relative"}},r.a.createElement("div",null,t.name),r.a.createElement(S.a,{style:{right:0,position:"absolute",marginTop:"-10px",zIndex:"100"},onClick:function(){var e;B((e=t._id,function(t){E.a.delete(ne+e).then((function(e){t({type:"deleteList",payload:{list:e.data}})})).catch((function(e){t({type:"errorList",payload:{error:e.message}})}))}));var a="User deleted list ".concat(t.name);B(I({text:a,boardId:t.boardId}))}},r.a.createElement(oe.a,{fontSize:"small"}))),k&&r.a.createElement("div",{className:o.editable},r.a.createElement(N.a,{onChange:z,multiline:!0,fullWidth:!0,value:g,style:{fontWeight:"bold"},autoFocus:!0,onFocus:function(e){var t=e.target.value;e.target.value="",e.target.value=t},onBlur:W}))),r.a.createElement(J.c,{droppableId:t._id,type:"card"},(function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),r.a.createElement("div",{className:o.scroll},a.map((function(e,t){return r.a.createElement(G,{key:e._id,task:e,index:t})})),v&&r.a.createElement(F,{value:s,changedHandler:_,itemAdded:R,closeHandler:A,type:"card",btnText:"Add Card",placeholder:"Enter a title for this card...",width:"230px"}),e.placeholder),C.current&&r.a.createElement(ee,{handleClick:T,icon:r.a.createElement(ae.a,null),btnText:"Add another card",type:"card",width:"256px"}))}))))})))}var le=a(36),se=a.n(le),ue=a(25),pe=a.n(ue),me=Object(B.a)((function(e){return{container:{display:"flex",justifyContent:"space-between",position:"fixed",width:"1405px",overflow:"hidden",opacity:.8},title:{fontWeight:"bold",padding:e.spacing(.7,.7,.7,.7),margin:e.spacing(.7,.7,.7,.7),fontFamily:"sans-serif",fontSize:"20px",marginTop:e.spacing(6.5),"&:hover":{opacity:1,backgroundColor:"hsla(0,0%,100%,.24)",borderRadius:4}}}}));function ge(e){var t=e.title,a=e.showEditable,n=me();return r.a.createElement("div",{className:n.container},r.a.createElement("div",{className:n.title,onClick:a},t))}var be=a(67),fe=a.n(be),he=a(65),ve=a.n(he),ye=Object(B.a)((function(e){return{wrapper:{fontFamily:"Arial, Helvetica, sans-serif",marginBottom:e.spacing(25),paddingTop:e.spacing(1),paddingLeft:e.spacing(2)},text:{fontSize:"15px"},timestamp:{fontSize:"10px",marginTop:e.spacing(.5),color:"#637187"}}}));function Oe(){var e=ye(),t=Object(n.useState)((new Date).toLocaleString()),a=Object(j.a)(t,2),c=(a[0],a[1]),o=Object(i.d)((function(e){return e.activities})).activities;return Object(n.useEffect)((function(){var e=setInterval((function(){c((new Date).toLocaleString())}),6e4);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{className:e.wrapper},o.map((function(t,a){var n,c=o[o.length-1-a],i=new Date(c.createdAt),d=pe()(i).fromNow(),l=c.text.split(" ")[0],s=c.text.replace(l,"");if(d.includes("second")||d.includes("minute")||d.includes("hour"))n=d;else if(d.includes("day")&&("a"===d.split(" ")[0]||d.split(" ")[0]<7)){if("a day ago"===d)n=pe()().subtract(1,"days").calendar().split(" at ")[0]+" at "+pe()(i).format("LT");else n=pe()().subtract(d.split(" ")[0],"days").calendar().split(" at ")[0]+" at "+pe()(i).format("LT")}else n=pe()(i).format("LLL");return r.a.createElement("div",{key:c._id,className:e.text},r.a.createElement("strong",null,l),s,r.a.createElement("p",{className:e.timestamp},n))})))}var je=Object(B.a)((function(e){return{hr:{backgroundColor:"rgba(9,30,66,.13)",border:e.spacing(0),height:e.spacing(.1),margin:e.spacing(0,0,3,0),padding:e.spacing(0),width:"100%"}}}));function xe(){var e=je();return r.a.createElement("hr",{className:e.hr})}var Ee=Object(B.a)((function(e){return{title:{fontWeight:"bold",marginLeft:function(t){return t.type?e.spacing(17):e.spacing(8)},paddingRight:function(t){return t.type?e.spacing(13):e.spacing(7)}},close:{marginTop:e.spacing(-1.3)}}}));function ke(e){var t=e.text,a=e.closeHandler,n=e.type,c=Ee({type:n});return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:c.title},t),r.a.createElement(S.a,{onClick:a,className:c.close},r.a.createElement(T.a,null)))}var we=Math.floor(100*Math.random())+1,Ce="https://api.unsplash.com/search/photos?page=".concat(we,"&query=").concat("landscape","&client_id=").concat("SZJuHTFL-JO31E435i4CZOuyZLlbnX1SZyiPkF3kE2Q"),Ie=Object(B.a)((function(e){return{container:{backgroundColor:"#EBECF0",width:"321px",float:"right",height:"100vh",right:e.spacing(0),top:e.spacing(5.63),borderRadius:e.spacing(0),position:"fixed",padding:e.spacing(1),zIndex:"1200"},card:{height:"90px",width:"45%",margin:e.spacing(.7),borderRadius:e.spacing(1),"&:hover":{opacity:.7,cursor:"pointer"}},menuContainer:{display:"flex",flexWrap:"wrap"}}})),Be=["rgb(0, 121, 191)","rgb(210, 144, 52)","rgb(81, 152, 57)","rgb(176, 70, 50)","rgb(137, 96, 158)","rgb(205, 90, 145)","rgb(75, 191, 107)","rgb(0, 174, 204)","rgb(131, 140, 145)"];function Le(e){var t=e.closeHandler,a=e.setColorBackground,c=Ie(),o=Object(n.useState)(!1),d=Object(j.a)(o,2),l=d[0],s=d[1],u=Object(n.useState)(!1),p=Object(j.a)(u,2),m=p[0],g=p[1],b=Object(i.d)((function(e){return e.images})).images,f=Object(i.c)();return Object(n.useEffect)((function(){f((function(e){E.a.get(Ce).then((function(t){e({type:"getUrls",payload:{images:t.data.results}})}))}))}),[f]),r.a.createElement(L.a,{className:c.container},r.a.createElement(ke,{text:"Change Background",closeHandler:t}),r.a.createElement(xe,null),r.a.createElement("div",{className:c.menuContainer},r.a.createElement("div",{className:c.card,style:{backgroundImage:"url('https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.48948499e309aef794d7.jpg')",backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(){s(!1),g(!0)}}),r.a.createElement("div",{className:c.card,style:{backgroundImage:"url('https://a.trellocdn.com/prgb/dist/images/colors@2x.864f4df15d825e89e199.jpg')",backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(){s(!0),g(!1)}})),l&&r.a.createElement("div",{className:c.menuContainer},Be.map((function(e){return r.a.createElement("div",{className:c.card,key:e,style:{backgroundColor:e},onClick:a.bind(null,e)})}))),m&&r.a.createElement("div",{className:c.menuContainer},b.map((function(e,t){return r.a.createElement("div",{className:c.card,key:t,style:{backgroundImage:"url(".concat(e.thumb,")"),positon:"relative"},onClick:a.bind(null,e)},r.a.createElement("span",{style:{position:"absolute",wordWrap:"break-word",overflow:"hidden",width:"100px",marginTop:"68px",marginRight:"10px",textDecoration:"underline",lineHeight:"1.5em",height:"1.5em"}},r.a.createElement("a",{style:{display:"block",textDecoration:"none",color:"white"},href:e.user.link,target:"blank"},e.user.username)))}))))}var Ne=a(66),_e=a.n(Ne),Se=Object(B.a)((function(e){return{container:{backgroundColor:"#F4F5F7",width:"321px",float:"right",height:"100vh",right:function(t){return!1===t.showMenu?e.spacing(-100):e.spacing(0)},top:e.spacing(5.63),borderRadius:e.spacing(0),position:"fixed",padding:e.spacing(1),wordWrap:"break-word",zIndex:"1200",transition:"right 0.7s ease-out"},scroll:{overflow:"auto",height:"95vh"},menu:{top:e.spacing(5.63),position:"fixed",right:e.spacing(0),marginTop:e.spacing(.5)}}}));function Re(e){var t=e.setBackground,a=e.board,c=Object(n.useState)(!1),o=Object(j.a)(c,2),d=o[0],l=o[1],s=Object(n.useState)(!1),u=Object(j.a)(s,2),p=u[0],m=u[1],g=Se({showMenu:d}),b=Object(i.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.menu},r.a.createElement(ee,{btnText:"Show Menu",handleClick:function(){return l(!0)},icon:r.a.createElement(ve.a,null),type:"menu",width:"120px"})),!p&&r.a.createElement(L.a,{className:g.container,elevation:1,variant:"outlined"},r.a.createElement(ke,{text:"Menu",closeHandler:function(){return l(!1)},type:"menu"}),r.a.createElement(xe,null),r.a.createElement(ee,{btnText:"Change Background",handleClick:function(){return m(!0)},type:"background",width:"310px",icon:r.a.createElement("span",{style:{marginRight:"13px",backgroundColor:"".concat(a.color),backgroundImage:"url(".concat(a.url,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"20px",height:"20px",borderRadius:"2px"}})}),r.a.createElement(ee,{btnText:"  Delete Board",handleClick:function(){var e;b((e=a.id,function(t){E.a.delete(k+e).then((function(e){t({type:"deleteBoard",payload:{board:e.data}})})).catch((function(e){t({type:"errorBoard",payload:{error:e.message}})}))})),window.location.href="http://localhost:1337"},type:"background",width:"310px",icon:r.a.createElement(_e.a,{style:{marginRight:"10px"}})}),r.a.createElement("div",{style:{display:"flex",marginTop:"20px"}},r.a.createElement(fe.a,{fontSize:"small",style:{paddingLeft:"20px",color:"#172B4D",opacity:"0.8"}}),r.a.createElement("div",{style:{paddingLeft:"10px",paddingBottom:"10px",fontWeight:"bold",fontSize:"15px",color:"#172B4D",opacity:"0.9"}},"Activity")),r.a.createElement("div",{className:g.scroll},r.a.createElement(Oe,null))),r.a.createElement("div",null,p&&r.a.createElement(Le,{closeHandler:function(){return m(!1)},setColorBackground:t})))}var Te=Object(B.a)((function(e){return{root:{minHeight:"100vh",overflowY:"auto"},listContainer:{display:"flex",alignItems:"flex-start",width:"100%",marginTop:e.spacing(.5)},wrapper:{marginTop:e.spacing(11.5)},editable:{marginLeft:e.spacing(1),height:"38px",padding:e.spacing(0,1,0,1),boxShadow:"inset 0 0 0 2px #0079bf",borderRadius:6,backgroundColor:"#EBECF0",width:"290px",position:"fixed",marginTop:e.spacing(6.5)}}}));function Ae(){var e=Te(),t=Object(O.g)(),a=t.id,c=t.name,o=Object(i.d)((function(e){return e.boards})),d=o.loading,l=o.currBoard,u=Object(i.d)((function(e){return e.lists})),p=u.listLoading,m=u.lists,g=Object(i.d)((function(e){return e.cards})),b=g.cardLoading,f=g.cards,h=Object(i.d)((function(e){return e.activities})).activities,v=Object(n.useState)({}),y=Object(j.a)(v,2),x=y[0],B=y[1],L=Object(n.useState)(!1),_=Object(j.a)(L,2),S=_[0],R=_[1],T=Object(n.useRef)(!0),A=Object(n.useState)(!1),z=Object(j.a)(A,2),H=z[0],D=z[1],q=Object(n.useState)(""),U=Object(j.a)(q,2),P=U[0],X=U[1],Q=Object(n.useState)("white"),V=Object(j.a)(Q,2),Y=V[0],G=V[1],$=Object(n.useState)(""),te=Object(j.a)($,2),ce=te[0],oe=te[1],ie=Object(n.useState)(!1),le=Object(j.a)(ie,2),ue=le[0],me=le[1],be=Object(n.useState)(""),fe=Object(j.a)(be,2),he=fe[0],ve=fe[1],ye=Object(i.c)();d||c===l.name||void 0===l.name?void 0===c&&(c=""):c=l.name,Object(n.useEffect)((function(){24===a.length&&(ye(function(e){return function(t){t({type:"makeRequestBoard"}),E.a.get(k+e).then((function(e){t({type:"getBoardById",payload:{currBoard:e.data}})})).catch((function(e){t({type:"errorBoard",payload:{error:e}})}))}}(a)),ye(function(e){return function(t){t({type:"makeRequestList"}),E.a.get(k+e+"/lists").then((function(e){t({type:"getLists",payload:{lists:e.data}})})).catch((function(e){t({type:"errorList",payload:{error:e}})}))}}(a)),ye(function(e){return function(t){t({type:"makeRequestCard"}),E.a.get(k+e+"/cards").then((function(e){t({type:"getCards",payload:{cards:e.data}})})).catch((function(e){t({type:"errorCard",payload:{error:e.message}})}))}}(a)),ye(function(e){return function(t){E.a.get(k+e+"/activities").then((function(e){t({type:"getActivities",payload:{activities:e.data}})})).catch((function(e){t({type:"errorActivity",payload:{error:e}})}))}}(a)))}),[ye,a]),Object(n.useEffect)((function(){se.a.isEmpty(l)||(G(l.image.color),oe(l.image.full),ve(l.name),document.title="".concat(l.name," | Trellis"))}),[l]),Object(n.useEffect)((function(){if(!p&&!b){var e={tasks:{},columns:{},columnOrder:[]},t=function(e){var t=se.a.filter(f,{listId:e}),a=se.a.orderBy(t,["order"],["asc"]),n=[];return a.forEach((function(e){return n.push(e._id)})),n};f.forEach((function(t){return e.tasks[t._id]=t})),se.a.orderBy(m,["order"],["asc"]).forEach((function(a){e.columns[a._id]=Object(s.a)(Object(s.a)({},a),{},{taskIds:t(a._id)}),e.columnOrder.push(a._id)})),B(Object(s.a)({},e)),R(!0)}}),[R,p,b,B,f,m]);if(a.length<24)return r.a.createElement("h1",null,"Invalid URL");var Oe=function(e){e.preventDefault(),X(e.target.value)},je=function(){if(""!==P){var e,t=x.columnOrder.length,a={name:P,boardId:l._id,order:0===t?"n":K(x.columns[x.columnOrder[t-1]].order,"")};ye((e=a,function(t){t({type:"postRequestList"}),E.a.post(ne,e).then((function(e){t({type:"addList",payload:{list:e.data}})})).catch((function(e){"Network Error"===e.message?t({type:"errorList",payload:{error:e}}):422===e.response.status&&t({type:"validationErrorList"})}))})),ye(I({text:"User added ".concat(P," to this board"),boardId:l._id})),X("")}},xe=function(){D(!1),T.current=!0,X("")},Ee=function(){D(!0),T.current=!1};return r.a.createElement("div",{className:e.root,style:{backgroundColor:"".concat(Y),backgroundImage:"url(".concat(ce,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}},r.a.createElement(O.a,{to:"/b/".concat(a,"/").concat(c)}),r.a.createElement(W,null),ue?r.a.createElement("div",{className:e.editable},r.a.createElement(N.a,{onChange:function(e){e.preventDefault(),ve(e.target.value)},fullWidth:!0,value:he,style:{fontWeight:"bold",fontFamily:"sans-serif",fontSize:"20px"},autoFocus:!0,onFocus:function(e){var t=e.target.value;e.target.value="",e.target.value=t},onBlur:function(){me(!1),ye(w(a,{name:he}))}})):r.a.createElement(ge,{title:l.name,showEditable:function(){return me(!0)}}),r.a.createElement(J.a,{onDragEnd:function(e){var t,a;console.log(e);var n=e.destination,r=e.source,c=e.draggableId,o=e.type;if(n&&(n.droppableId!==r.droppableId||n.index!==r.index))if("list"!==o){var i=x.columns[r.droppableId],d=x.columns[n.droppableId];if(i!==d){a=0===d.taskIds.length?"n":0===n.index?K("",x.tasks[d.taskIds[0]].order):n.index===d.taskIds.length?K(x.tasks[d.taskIds[n.index-1]].order,""):K(x.tasks[d.taskIds[n.index-1]].order,x.tasks[d.taskIds[n.index]].order),ye(Z(c,{order:a,listId:d._id}));var u="User moved ".concat(x.tasks[c].name," from ").concat(i.name," to ").concat(d.name),p=h[h.length-1];p.text==="User moved ".concat(x.tasks[c].name," from ").concat(d.name," to ").concat(i.name)&&pe()(p.createdAt).fromNow().includes("second")?ye(function(e){return function(t){E.a.delete(C+e).then((function(e){t({type:"deleteActivity",payload:{activity:e.data}})})).catch((function(e){t({type:"errorActivity",payload:{error:e}})}))}}(p._id)):ye(I({text:u,boardId:l._id}));var m=Array.from(i.taskIds);m.splice(r.index,1);var g=Object(s.a)(Object(s.a)({},i),{},{taskIds:m}),b=x.tasks[c];b.order=a;var f=Array.from(d.taskIds);f.splice(n.index,0,c);var v=Object(s.a)(Object(s.a)({},d),{},{taskIds:f}),y=Object(s.a)(Object(s.a)({},x),{},{columns:Object(s.a)(Object(s.a)({},x.columns),{},(t={},Object(M.a)(t,g._id,g),Object(M.a)(t,v._id,v),t)),tasks:Object(s.a)(Object(s.a)({},x.tasks),{},{draggableId:b})});B(y)}else{var O=i;a=0===n.index?K("",x.tasks[O.taskIds[0]].order):n.index===O.taskIds.length-1?K(x.tasks[O.taskIds[n.index]].order,""):n.index<r.index?K(x.tasks[O.taskIds[n.index-1]].order,x.tasks[O.taskIds[n.index]].order):K(x.tasks[O.taskIds[n.index]].order,x.tasks[O.taskIds[n.index+1]].order),ye(Z(c,{order:a}));var j=Array.from(O.taskIds);j.splice(r.index,1),j.splice(n.index,0,c);var k=x.tasks[c];k.order=a;var w=Object(s.a)(Object(s.a)({},O),{},{taskIds:j}),L=Object(s.a)(Object(s.a)({},x),{},{columns:Object(s.a)(Object(s.a)({},x.columns),{},Object(M.a)({},w._id,w)),tasks:Object(s.a)(Object(s.a)({},x.tasks),{},{draggableId:k})});B(L)}}else{var N=x.columnOrder;a=0===n.index?K("",x.columns[N[0]].order):n.index===N.length-1?K(x.columns[N[n.index]].order,""):n.index<r.index?K(x.columns[N[n.index-1]].order,x.columns[N[n.index]].order):K(x.columns[N[n.index]].order,x.columns[N[n.index+1]].order),ye(re(c,{order:a}));var _=Array.from(x.columnOrder),S=x.columns[c];S.order=a,_.splice(r.index,1),_.splice(n.index,0,c);var R=Object(s.a)(Object(s.a)({},x),{},{columnOrder:_,columns:Object(s.a)(Object(s.a)({},x.columns),{},{draggableId:S})});B(R)}}},r.a.createElement(J.c,{droppableId:"all-columns",direction:"horizontal",type:"list"},(function(t){return r.a.createElement("div",Object.assign({className:e.listContainer},t.droppableProps,{ref:t.innerRef}),S&&x.columnOrder.map((function(e,t){var a=x.columns[e],n=a.taskIds.map((function(e){return x.tasks[e]}));return r.a.createElement(de,{key:a._id,column:a,tasks:n,index:t})})),r.a.createElement("div",{className:e.wrapper},T.current&&r.a.createElement(ee,{handleClick:Ee,btnText:"Add another list",type:"list",icon:r.a.createElement(ae.a,null),width:"256px",color:"white"}),H&&r.a.createElement(F,{value:P,changedHandler:Oe,itemAdded:je,closeHandler:xe,type:"list",btnText:"Add List",placeholder:"Enter list title...",width:"230px",marginLeft:"1"})),t.placeholder)}))),r.a.createElement(Re,{setBackground:function(e){e.thumb?(oe(e.full),G("white"),ye(w(l._id,{image:{full:e.full,thumb:e.thumb,color:"white"}}))):(G(e),oe(""),ye(w(l._id,{image:{full:"",thumb:"",color:e}})))},board:{id:a,color:Y,url:ce}}))}var Fe=function(){return r.a.createElement("h1",null,"404, Page Not Found")},ze=function(){return r.a.createElement(y.a,null,r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/",exact:!0,component:P}),r.a.createElement(O.b,{path:"/b/:id/:name?"},r.a.createElement(Ae,null)),r.a.createElement(O.b,{component:Fe})))},We=(a(101),r.a.createElement(i.a,{store:v},r.a.createElement(ze,null)));o.a.render(r.a.createElement(r.a.StrictMode,null,We),document.getElementById("root"))},73:function(e,t,a){e.exports=a(102)}},[[73,1,2]]]);
//# sourceMappingURL=main.fcf46f79.chunk.js.map